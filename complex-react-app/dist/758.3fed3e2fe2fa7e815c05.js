"use strict";(self.webpackChunkcomplex_react_app=self.webpackChunkcomplex_react_app||[]).push([[758],{758:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f});var s=a(294),l=a(387),n=a(250),o=a(655),c=a(861),r=a(62),i=a(326),u=a(884),m=a(210),d=a(564),p=a(983);const f=function(){const{id:e}=(0,n.UO)(),[t,a]=(0,s.useState)(!0),[f,h]=(0,s.useState)(),E=(0,s.useContext)(d.Z),g=(0,s.useContext)(p.Z),w=(0,n.s0)();if((0,s.useEffect)((()=>{const t=c.Z.CancelToken.source();return async function(){try{const s=await c.Z.get(`/post/${e}`,{cancelToken:t.token});console.log("ViewSinglePost.js useEffect/fetchPost Axios get request for ${username}/posts returned: ",s),h(s.data),a(!1)}catch(e){console.log("Error in ViewSinglePosts useEffect (or request was cancelled) catch block was: ",e)}}(),()=>{t.cancel()}}),[e]),!t&&!f)return s.createElement(m.Z,{message:"ViewSinglePost.js"});if(t)return s.createElement(l.Z,{title:"..."},s.createElement(r.Z,null));const y=new Date(f.createdDate),k=`${y.getMonth()+1}/${y.getDate()}/${y.getFullYear()}`;return s.createElement(l.Z,{title:f.title},s.createElement("div",{className:"d-flex justify-content-between"},s.createElement("h2",null,f.title),!!E.loggedIn&&E.user.username==f.author.username&&s.createElement("span",{className:"pt-2"},"                                                                                       ",s.createElement(o.rU,{to:`/post/${f._id}/edit`,"data-tooltip-content":"Edit Post","data-tooltip-id":"edit",className:"text-primary mr-2"},s.createElement("i",{className:"fas fa-edit"})),s.createElement(u.u,{id:"edit",className:"custom-tooltip"})," ",s.createElement("a",{onClick:async function(){if(window.confirm("Do you really want to delete this post?"))try{"Success"==(await c.Z.delete(`/post/${e}`,{data:{token:E.user.token}})).data&&(g({type:"flashMessage",value:"Post was successfully deleted."}),w(`/profile/${E.user.username}`))}catch(e){console.log("error in ViewSinglePost deleteHandler catch block is ",e)}},"data-tooltip-content":"Delete Post","data-tooltip-id":"delete",className:"delete-post-button text-danger"},s.createElement("i",{className:"fas fa-trash"})),s.createElement(u.u,{id:"delete",className:"custom-tooltip"}))),s.createElement("p",{className:"text-muted small mb-4"},s.createElement(o.rU,{to:`/profile/${f.author.username}`},s.createElement("img",{className:"avatar-tiny",src:f.author.avatar})),"Posted by ",s.createElement(o.rU,{to:`/profile/${f.author.username}`},f.author.username)," on ",k),s.createElement("div",{className:"body-content"},s.createElement(i.D,{children:f.body,allowedElements:["p","br","strong","em","h1","h2","h3","h4","h5","h6","ul","ol","li"]})))}}}]);